// 在 HTML 文件的 <head> 中添加 Firebase SDK
<script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore.js"></script>

<script>
    // 替换为你的 Firebase 配置
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
    };
    
    // 初始化 Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 添加帖子
    function addPost() {
        let postInput = document.getElementById("postInput").value.trim();
        if (postInput === "") return;

        let timestamp = new Date().toISOString();
        
        db.collection("posts").add({
            text: postInput,
            timestamp: timestamp
        }).then(() => {
            document.getElementById("postInput").value = "";
            loadPosts(); // 重新加载帖子
        });
    }

    // 加载帖子
    function loadPosts() {
        let postsSection = document.getElementById("posts");
        postsSection.innerHTML = "";

        db.collection("posts").orderBy("timestamp", "desc").get().then((querySnapshot) => {
            querySnapshot.forEach((doc) => {
                let post = doc.data();
                let postElement = document.createElement("div");
                postElement.classList.add("post");
                postElement.innerHTML = `<p>${post.text}</p><div class="info">发表于 ${new Date(post.timestamp).toLocaleString()}</div>`;
                postsSection.appendChild(postElement);
            });
        });
    }

    // 页面加载时获取帖子
    window.onload = loadPosts;
</script>



